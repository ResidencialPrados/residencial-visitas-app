<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Guardia Administrador</title>

  <!-- Theme global -->
  <link rel="stylesheet" href="css/theme.css">
  <link rel="stylesheet" href="css/styles-guard-admin.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js" defer></script>

  <!-- QR Scanner -->
  <script src="https://unpkg.com/html5-qrcode" defer></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Dashboard Guardia Administrador</h1>
      <nav class="nav-buttons">
        <button id="logoutBtn" class="btn">Cerrar sesión</button>
        <button id="activarQRBtn" class="btn">Activar Lector QR</button>
        <button id="toggleHistorialBtn" class="btn">Ver Historial Completo</button>
      </nav>
    </header>

    <main>
      <section id="qr-reader" class="qr-section" aria-hidden="true"></section>

      <!-- … sección de visitas pendiente … -->

      <section class="card">
        <h2>Registro de Usuario</h2>
        <form id="crearUsuarioForm" class="form-stack" autocomplete="off">
          <div class="field">
            <label for="rolUsuario">Rol:</label>
            <select id="rolUsuario" required>
              <option value="">Seleccione rol</option>
              <option value="guard">Guardia Común</option>
              <option value="guard_admin">Guardia Administrador</option>
              <option value="resident">Residente</option>
            </select>
          </div>

          <div id="camposExtra" class="form-stack hidden">
            <div class="field">
              <label for="nuevoEmail">Email:</label>
              <input type="email" id="nuevoEmail" placeholder="correo@ejemplo.com"
                     required autocomplete="off">
            </div>
            <div class="field">
              <label for="nuevoPassword">Contraseña:</label>
              <input type="password" id="nuevoPassword" minlength="6"
                     placeholder="Mín. 6 caracteres" required autocomplete="new-password">
            </div>
            <div class="field">
              <label for="nuevoConfirmPassword">Confirmar contraseña:</label>
              <input type="password" id="nuevoConfirmPassword" minlength="6"
                     placeholder="Repite la contraseña" required autocomplete="new-password">
            </div>
            <div class="field hidden" id="labelNombre">
              <label for="nuevoNombre">Nombre completo:</label>
              <input type="text" id="nuevoNombre">
            </div>
            <div class="field hidden" id="labelIdentidad">
              <label for="nuevoIdentidad">Identidad:</label>
              <input type="text" id="nuevoIdentidad">
            </div>
            <div class="field hidden" id="labelTelefono">
              <label for="nuevoTelefono">Teléfono:</label>
              <input type="text" id="nuevoTelefono">
            </div>
            <div class="field hidden" id="labelCasa">
              <label for="nuevoCasa">Casa:</label>
              <input type="text" id="nuevoCasa">
            </div>
            <div class="field hidden" id="labelBloque">
              <label for="nuevoBloque">Bloque:</label>
              <input type="text" id="nuevoBloque">
            </div>
          </div>

          <button type="submit" class="btn-full">Crear Usuario</button>
          <p id="crearUsuarioMsg" class="message"></p>
        </form>
      </section>

      <!-- … sección de residentes y pagos … -->
    </main>

    <footer class="footer">
      <button class="back-btn btn" onclick="history.back()">← Volver</button>
    </footer>
  </div>

  <script src="js/main-guard-admin.js" defer></script>
</body>
</html>
