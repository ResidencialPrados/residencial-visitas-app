<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Dashboard Guardia</title>

  <!-- Manifest para PWA si se desea -->
  <link rel="manifest" href="../manifest.json" />

  <!-- Tu theme global con color verde y responsividad -->
  <link rel="stylesheet" href="css/theme.css"/>
  <!-- Estilos específicos de guard -->
  <link rel="stylesheet" href="css/styles-guard.css"/>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js" defer></script>
  <!-- QR Scanner -->
  <script src="https://unpkg.com/html5-qrcode" defer></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Dashboard Guardia</h1>
      <nav class="nav-buttons">
        <button id="logoutBtn" class="btn btn-primary">Cerrar sesión</button>
        <button id="activarQRBtn" class="btn btn-primary">Activar Lector QR</button>
      </nav>
    </header>

    <main>
      <!-- Lector QR -->
      <section id="qr-reader" class="qr-section" aria-hidden="true"></section>

      <!-- Visitas Pendientes -->
      <section class="card">
        <h2>Visitas Pendientes (últimas 24 h)</h2>
        <table class="table">
          <thead>
            <tr>
              <th>Visitante</th>
              <th>Marca</th>
              <th>Color</th>
              <th>Placa</th>
              <th>Casa</th>
              <th>Bloque</th>
              <th>Teléfono</th>
              <th>Guardia</th>
              <th>Hora</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody id="visitas-body">
            <tr><td colspan="10" class="loading">Cargando visitas…</td></tr>
          </tbody>
        </table>
      </section>

      <!-- Residentes y Pagos -->
      <section class="card">
        <h2>Residentes y Pagos</h2>
        <div class="field">
          <input
            type="text"
            id="buscarResidente"
            class="input"
            placeholder="Buscar residente por nombre, correo, casa, bloque o teléfono"
          />
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Correo</th>
              <th>Teléfono</th>
              <th>Casa</th>
              <th>Bloque</th>
              <th>Estado de Pago</th>
            </tr>
          </thead>
          <tbody id="residents-body">
            <tr><td colspan="6" class="loading">Cargando residentes…</td></tr>
          </tbody>
        </table>
      </section>
    </main>

    <!-- Eliminado el footer con el botón “Volver” -->
  </div>

  <script src="js/main-guard.js" defer></script>

  <!-- Service Worker PWA opcional -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('../service-worker.js')
        .then(reg => console.log('✅ Service Worker registrado:', reg))
        .catch(err => console.error('❌ Error en Service Worker:', err));
    }
  </script>
</body>
</html>
